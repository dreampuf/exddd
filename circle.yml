machine:
  environment:
    NOTETON_ENV: dev
  services:
    - docker

dependencies:
  override:
    - docker run -it -v "$PWD":/usr/src/myapp -e GOPATH=/usr/src/myapp/web -w /usr/src/myapp/web golang:latest bash -c "go get github.com/revel/revel && go get github.com/revel/cmd/revel && go get github.com/jinzhu/gorm && ./bin/revel package web"

test:
  override:
    - docker run -it -v "$PWD":/usr/src/myapp -e GOPATH=/usr/src/myapp/web -w /usr/src/myapp/web golang:latest bash -c "./bin/revel test web"

general:
  artifacts:
    - ./web/web.tar.gz

deployment:
  production:
    branch: master
    commands:
      - ./system_config/deploy_production.sh
